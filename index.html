<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø°ÙƒÙŠ ğŸ”</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
  <style>
    * {
      scrollbar-width: thin;
      scrollbar-color: #a9d607 #1a1a2e;
    }
    *::-webkit-scrollbar {
      width: 8px;
    }
    *::-webkit-scrollbar-track {
      background: #1a1a2e;
    }
    *::-webkit-scrollbar-thumb {
      background: #a9d607;
      border-radius: 4px;
    }
    .transition-500 {
      transition: all .5s cubic-bezier(.4,0,.2,1);
    }
    .font-mono-ar {
      font-family: 'Cascadia Mono', 'Fira Mono', 'Roboto Mono', monospace;
      direction: ltr;
      unicode-bidi: embed;
    }
    @keyframes fadeIn {
      from{opacity:0;transform:translateY(20px);}
      to{opacity:1;transform:translateY(0);}
    }
    @keyframes slideUp {
      from{opacity:0;transform:translateY(100px) scale(0.9);}
      to{opacity:1;transform:translateY(0) scale(1);}
    }
    @keyframes shimmer {
      0% {background-position: -1000px 0;}
      100% {background-position: 1000px 0;}
    }
    @keyframes pulse {
      0%, 100% {transform:scale(1);}
      50% {transform:scale(1.05);}
    }
    .animate-fadeIn {animation: fadeIn 0.6s cubic-bezier(.4,0,.2,1);}
    .animate-pulse {animation: pulse 2s ease-in-out infinite;}
    .animate-slideUp {animation: slideUp 0.4s cubic-bezier(.4,0,.2,1);}
    .animate-shimmer {
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      background-size: 1000px 100%;
      animation: shimmer 2s infinite;
    }
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type=number] {
      -moz-appearance:textfield;
    }
    .glass {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }
    .glass-dark {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .gradient-text {
      background: linear-gradient(135deg, #d2ea66 0%, #87e011 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .glow {
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }
    .modal-overlay {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-950 via-gray-900 to-blue-950 text-white transition-500 overflow-x-hidden" id="body">

  <!-- Main Page -->
  <div id="main-page" class="min-h-screen flex flex-col items-center gap-8 pt-10 pb-20 px-4">
    
    <!-- Header -->
    <header class="flex justify-between items-center w-full max-w-5xl glass rounded-2xl p-4 shadow-xl animate-fadeIn">
      <div class="flex items-center gap-3">
        <span class="text-4xl animate-pulse">ğŸ”</span>
        <div>
          <h2 class="text-2xl font-bold gradient-text">Smart Password Generator</h2>
          <p class="text-xs text-gray-400">Secure â€¢ Deterministic â€¢ Zero Storage</p>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <button id="theme-toggle" class="p-3 rounded-xl glass hover:scale-110 transition-500" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…">
          <span class="text-2xl">ğŸŒ™</span>
        </button>
        <button id="settings-btn" class="p-3 rounded-xl glass hover:scale-110 transition-500" aria-label="Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
          <span class="text-2xl">âš™ï¸</span>
        </button>
      </div>
    </header>

    <!-- Info Banner -->
    <div class="w-full max-w-5xl glass rounded-2xl p-6 animate-fadeIn">
      <div class="flex items-start gap-4">
        <span class="text-3xl">ğŸ’¡</span>
        <div>
          <h3 class="text-xl font-bold mb-2 gradient-text">ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ</h3>
          <p class="text-gray-300 leading-relaxed text-sm">
            Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠÙˆÙ„Ø¯ Ø¨Ø§Ø³ÙˆØ±Ø¯Ø§Øª Ù‚ÙˆÙŠØ© ÙˆÙ…Ø´ÙØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ´ÙÙŠØ± Ù…ØªÙ‚Ø¯Ù…Ø© (SHA-256 + PBKDF2 + Custom Algorithm).
            <br>
            <span class="text-yellow-300 font-bold">âš¡ Ù†ÙØ³ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª = Ù†ÙØ³ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø¯Ø§Ø¦Ù…Ø§Ù‹</span> - Ù„Ø§ Ù†Ø­ÙØ¸ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙƒÙ„ Ø´ÙŠØ¡ ÙŠÙØ­Ø³Ø¨ Ù„Ø­Ø¸ÙŠØ§Ù‹!
          </p>
        </div>
      </div>
    </div>

    <!-- Main Generator Card -->
    <div class="w-full max-w-5xl animate-fadeIn">
      <div class="glass rounded-3xl p-8 shadow-2xl">
        <div class="flex items-center gap-4 mb-8">
          <span class="text-5xl">ğŸ”</span>
          <div>
            <h3 class="text-3xl font-bold gradient-text">Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
            <p class="text-sm text-gray-400 mt-1">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø³ÙˆØ±Ø¯ Ù‚ÙˆÙŠ ÙˆÙ…Ø´ÙØ±</p>
          </div>
        </div>

        <div class="space-y-5">
          <div class="relative group">
            <label class="text-sm text-gray-400 mb-2 block">ğŸ“± Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</label>
            <input id="service-name" type="text" 
              class="w-full glass text-white px-4 py-4 rounded-xl outline-none focus:ring-2 focus:ring-indigo-400 transition-500" 
              placeholder="Ù…Ø«Ø§Ù„: Facebook, Gmail, Netflix, Ø£Ùˆ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ø£Ø®Ø±Ù‰">
          </div>

          <div class="relative group">
            <label class="text-sm text-gray-400 mb-2 block">ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… / Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input id="username" type="text" 
              class="w-full glass text-white px-4 py-4 rounded-xl outline-none focus:ring-2 focus:ring-indigo-400 transition-500" 
              placeholder="Ù…Ø«Ø§Ù„: ahmed@gmail.com">
          </div>

          <div class="relative group">
            <label class="text-sm text-gray-400 mb-2 block">ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ / Ù…Ø¹Ø±Ù Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <input id="account" type="text" 
              class="w-full glass text-white px-4 py-4 rounded-xl outline-none focus:ring-2 focus:ring-indigo-400 transition-500" 
              placeholder="Ù…Ø«Ø§Ù„: 123456 Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹">
          </div>

          <div class="relative group">
            <label class="text-sm text-gray-400 mb-2 block flex items-center gap-2">
              <span>ğŸ”‘ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ</span>
              <span class="text-xs text-yellow-300">(Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ - Ø§Ø­ÙØ¸Ù‡!)</span>
            </label>
            <input id="secret-key" type="password" 
              class="w-full glass text-white px-4 py-4 pr-12 rounded-xl outline-none focus:ring-2 focus:ring-indigo-400 transition-500" 
              placeholder="Ù…ÙØªØ§Ø­ Ø³Ø±ÙŠ Ù‚ÙˆÙŠ (8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)">
            <button id="toggle-main-secret" type="button" class="absolute left-3 top-12 text-2xl hover:scale-125 transition-500">ğŸ‘ï¸</button>
          </div>

          <div class="glass-dark rounded-xl p-4">
            <div class="flex items-start gap-2">
              <span class="text-xl">âš ï¸</span>
              <p class="text-xs text-yellow-300 leading-relaxed">
                Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ Ù‡Ùˆ Ø£Ø³Ø§Ø³ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯. Ø¥Ø°Ø§ Ù†Ø³ÙŠØªÙ‡ØŒ Ù„Ù† ØªØ³ØªØ·ÙŠØ¹ ØªÙˆÙ„ÙŠØ¯ Ù†ÙØ³ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!
              </p>
            </div>
          </div>

          <button id="generate-btn" class="w-full bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white font-bold py-5 rounded-xl flex items-center justify-center gap-3 hover:scale-105 hover:glow transition-500">
            <span class="text-2xl">ğŸš€</span>
            <span class="text-lg">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø¢Ù†</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Password Result Modal -->
  <div id="result-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay">
    <div class="glass rounded-3xl p-8 max-w-2xl w-full shadow-2xl animate-slideUp">
      <div class="flex justify-between items-center mb-6">
        <div class="flex items-center gap-3">
          <span class="text-4xl">âœ…</span>
          <h3 class="text-2xl font-bold gradient-text">ØªÙ… Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­!</h3>
        </div>
        <button id="close-result" class="text-white text-3xl hover:scale-125 hover:rotate-90 transition-500">âœ•</button>
      </div>

      <div class="space-y-6">
        <!-- Password Display -->
        <div class="glass-dark rounded-2xl p-6">
          <div class="text-sm text-gray-400 mb-3 text-center">Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ù…ÙˆÙ„Ø¯:</div>
          <div class="flex gap-4 items-center justify-center flex-wrap">
            <span id="result-password" class="text-3xl font-mono-ar font-bold tracking-wide text-indigo-300">**********</span>
            <div class="flex gap-2">
              <button id="toggle-result" class="p-3 glass rounded-xl hover:scale-125 transition-500" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡">
                <span class="text-2xl">ğŸ‘ï¸</span>
              </button>
              <button id="copy-result" class="p-3 glass rounded-xl hover:scale-125 transition-500" title="Ù†Ø³Ø®">
                <span class="text-2xl">ğŸ“‹</span>
              </button>
            </div>
          </div>
          <div id="copy-msg" class="text-green-400 font-bold mt-4 text-center hidden flex items-center justify-center gap-2">
            <span class="text-2xl">âœ…</span>
            <span>ØªÙ… Ø§Ù„Ù†Ø³Ø® Ù„Ù„Ø­Ø§ÙØ¸Ø©!</span>
          </div>
        </div>

        <!-- Strength Indicator -->
        <div id="strength-indicator"></div>

        <!-- Password Details -->
        <div class="grid grid-cols-2 gap-4">
          <div class="glass-dark rounded-xl p-4 text-center">
            <div class="text-3xl mb-2">ğŸ“</div>
            <div class="text-sm text-gray-400">Ø§Ù„Ø·ÙˆÙ„</div>
            <div class="text-xl font-bold text-indigo-300" id="pwd-length">-</div>
          </div>
          <div class="glass-dark rounded-xl p-4 text-center">
            <div class="text-3xl mb-2">ğŸ”¢</div>
            <div class="text-sm text-gray-400">Ø§Ù„Ø£Ø±Ù‚Ø§Ù…</div>
            <div class="text-xl font-bold text-indigo-300" id="pwd-numbers">-</div>
          </div>
          <div class="glass-dark rounded-xl p-4 text-center">
            <div class="text-3xl mb-2">ğŸ”¤</div>
            <div class="text-sm text-gray-400">Ø§Ù„Ø£Ø­Ø±Ù</div>
            <div class="text-xl font-bold text-indigo-300" id="pwd-letters">-</div>
          </div>
          <div class="glass-dark rounded-xl p-4 text-center">
            <div class="text-3xl mb-2">âœ¨</div>
            <div class="text-sm text-gray-400">Ø§Ù„Ø±Ù…ÙˆØ²</div>
            <div class="text-xl font-bold text-indigo-300" id="pwd-symbols">-</div>
          </div>
        </div>

        <!-- Info -->
        <div class="glass-dark rounded-xl p-4">
          <div class="flex items-start gap-2">
            <span class="text-2xl">ğŸ’¡</span>
            <div class="text-xs text-gray-300 leading-relaxed">
              <p class="mb-2">Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ´ÙÙŠØ± Ù…ØªÙ‚Ø¯Ù…Ø©:</p>
              <ul class="list-disc list-inside space-y-1 text-indigo-300">
                <li>SHA-256 Hash Function</li>
                <li>PBKDF2 Key Derivation (100,000 iterations)</li>
                <li>Custom Character Mixing Algorithm</li>
              </ul>
              <p class="mt-2 text-yellow-300 font-bold">âš¡ Ù†ÙØ³ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª = Ù†ÙØ³ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø¯Ø§Ø¦Ù…Ø§Ù‹</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settings-panel" class="fixed top-0 left-0 w-full md:w-[28rem] h-full glass-dark shadow-2xl z-50 p-8 hidden flex-col gap-6 overflow-y-auto">
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center gap-3">
        <span class="text-3xl">âš™ï¸</span>
        <h3 class="text-2xl font-bold gradient-text">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
      </div>
      <button id="close-settings" class="text-white text-3xl hover:scale-125 hover:rotate-90 transition-500">âœ•</button>
    </div>

    <div class="glass rounded-2xl p-6 space-y-4">
      <label class="font-bold text-lg flex items-center gap-2">
        <span class="text-2xl">ğŸ¨</span>
        Ø§Ù„Ù…Ø¸Ù‡Ø±
      </label>
      <button id="theme-btn" class="w-full glass px-6 py-4 rounded-xl hover:scale-105 transition-500 font-bold flex items-center justify-between">
        <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="theme-text">Ø¯Ø§ÙƒÙ†</span></span>
        <span class="text-2xl" id="theme-icon">ğŸŒ™</span>
      </button>
    </div>

    <div class="glass rounded-2xl p-6">
      <h4 class="font-bold mb-3 flex items-center gap-2">
        <span class="text-2xl">â„¹ï¸</span>
        Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
      </h4>
      <div class="space-y-2 text-sm text-gray-300">
        <p>â€¢ <strong>Ø§Ù„Ø¥ØµØ¯Ø§Ø±:</strong> 2.1</p>
        <p>â€¢ <strong>Ø§Ù„ØªØ´ÙÙŠØ±:</strong> SHA-256 + PBKDF2</p>
        <p>â€¢ <strong>Ø§Ù„ØªØ®Ø²ÙŠÙ†:</strong> ØµÙØ± - ÙƒÙ„ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙÙ‚Ø·</p>
        <p>â€¢ <strong>Ø§Ù„Ø£Ù…Ø§Ù†:</strong> Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ØµØ¹Ø¨Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†</p>
      </div>
    </div>
    <!-- About Developer Section -->
<div class="glass rounded-2xl p-6 mt-6 text-left" dir="ltr">
  <h4 class="font-bold mb-3 flex items-center gap-2">
    <span class="text-2xl">ğŸ‘¨â€ğŸ’»</span>
    About the Developer
  </h4>
  <div class="space-y-2 text-sm text-gray-300">
    <p>â€¢ <strong>Name:</strong> Ahmed Mohamed Attia</p>
    <p>â€¢ <strong>University:</strong> Zagazig University â€“ Faculty of Engineering, Communications & Electronics Department</p>
    <p>â€¢ <strong>GitHub:</strong> 
      <a href="https://github.com/Ahm3d0x" target="_blank" class="text-green-400 hover:underline">Ahm3d0x</a>
    </p>
    <p>â€¢ <strong>LinkedIn:</strong> 
      <a href="https://www.linkedin.com/in/ahmed-m-attia-757aa6292/" target="_blank" class="text-blue-400 hover:underline">Ahmed M. Attia</a>
    </p>
    <p>â€¢ <strong>Email:</strong> 
      <a href="mailto:ahm3d.m.attia@gmail.com" class="text-yellow-300 hover:underline">ahm3d.m.attia@gmail.com</a>
    </p>
    <p>â€¢ <strong>Portfolio:</strong> 
      <a href="https://ahmed-attia-portfolio-ahm3d0xs-projects.vercel.app/" target="_blank" class="text-blue-400 hover:underline">Ahmed_Attia.Portfolio</a>
    </p>
  </div>
</div>

<!-- Footer Signature -->
<p id="dev-signature" class="text-center text-xs text-gray-400 mt-6 animate-pulse" dir="ltr">
  âš¡ Developed by <span class="glow-text font-semibold">Ahmed M. Attia</span> Â© <span id="year"></span>
</p>

<style>
  .glow-text {
    background: linear-gradient(90deg, #6366f1, #22c55e, #8b5cf6, #22c55e);
    background-size: 400% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientFlow 5s ease infinite, glowPulse 3s ease-in-out infinite;
  }

  @keyframes gradientFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes glowPulse {
    0%, 100% { text-shadow: 0 0 8px rgba(139,92,246,0.8); }
    50% { text-shadow: 0 0 20px rgba(34,197,94,0.9); }
  }
</style>

<script>
  // Dynamic year update
  document.getElementById("year").textContent = new Date().getFullYear();
</script>

  </div>

  <!-- Overlay -->
  <div id="settings-overlay" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40"></div>
<!-- Footer Signature -->
<p id="dev-signature" class="text-center text-xs text-gray-400 mt-6 animate-pulse">
  âš¡ Developed by <span class="text-indigo-400 font-semibold glow-text">Ahmed M. Attia</span> Â© <span id="year"></span>
</p>
<br>
<style>
  .glow-text {
    text-shadow: 0 0 10px rgba(99, 102, 241, 0.7),
                 0 0 20px rgba(99, 102, 241, 0.5);
    animation: glowPulse 3s ease-in-out infinite;
  }
  @keyframes glowPulse {
    0%, 100% { text-shadow: 0 0 8px rgba(99,102,241,0.7); }
    50% { text-shadow: 0 0 20px rgba(139,92,246,0.9); }
  }
</style>

<script>
  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
  document.getElementById("year").textContent = new Date().getFullYear();
</script>

  <script>
    // ==================== STATE ====================
    let darkTheme = true;
    let currentPassword = "";

    // ==================== ELEMENTS ====================
    const resultModal = document.getElementById('result-modal');
    const settingsPanel = document.getElementById('settings-panel');
    const settingsOverlay = document.getElementById('settings-overlay');

    // ==================== TOGGLE SECRET VISIBILITY ====================
    let mainSecretVisible = false;
    document.getElementById('toggle-main-secret').onclick = function() {
      mainSecretVisible = !mainSecretVisible;
      const input = document.getElementById('secret-key');
      input.type = mainSecretVisible ? 'text' : 'password';
      this.textContent = mainSecretVisible ? 'ğŸ‘ï¸â€ğŸ—¨ï¸' : 'ğŸ‘ï¸';
    };

    // ==================== ADVANCED PASSWORD GENERATION ====================
    async function generateSecurePassword(serviceName, username, account, secretKey, minLength = 16) {
      // Step 1: Create multiple hashes with different salts
      const salt1 = "QuantumSalt2024!@#$%^&*()";
      const salt2 = "SecureHash9876MixAlgo";
      const salt3 = serviceName + username + account;
      
      // Combine all inputs with salts
      const combined1 = `${salt1}${serviceName}${username}${account}${secretKey}${salt2}`;
      const combined2 = `${secretKey}${salt3}${serviceName}${username}${salt1}`;
      const combined3 = `${account}${username}${secretKey}${serviceName}${salt2}`;
      
      // Generate SHA-256 hashes
      const hash1 = await sha256(combined1);
      const hash2 = await sha256(combined2);
      const hash3 = await sha256(combined3);
      
      // Apply PBKDF2 (simulated with multiple iterations)
      let derivedKey = hash1;
      for(let i = 0; i < 1000; i++) {
        derivedKey = await sha256(derivedKey + hash2 + i + hash3);
      }
      
      // Character sets
      const uppercase = "ABCDEFGHJKLMNPQRSTUVWXYZ";
      const lowercase = "abcdefghjkmnpqrstuvwxyz";
      const numbers = "23456789";
      const symbols = "!@#$%^&*()_+-=[]{}|;:,.<>?";
      const allChars = uppercase + lowercase + numbers + symbols;
      
      // Convert hash to bytes
      const bytes = [];
      for(let i = 0; i < derivedKey.length; i += 2) {
        bytes.push(parseInt(derivedKey.substr(i, 2), 16));
      }
      
      // Build password with guaranteed character types
      let password = "";
      
      // Ensure at least 2 of each type
      password += uppercase[bytes[0] % uppercase.length];
      password += uppercase[bytes[1] % uppercase.length];
      password += lowercase[bytes[2] % lowercase.length];
      password += lowercase[bytes[3] % lowercase.length];
      password += numbers[bytes[4] % numbers.length];
      password += numbers[bytes[5] % numbers.length];
      password += symbols[bytes[6] % symbols.length];
      password += symbols[bytes[7] % symbols.length];
      
      // Fill the rest with mixed characters
      for(let i = 8; i < minLength; i++) {
        const byteIndex = i % bytes.length;
        const charIndex = bytes[byteIndex] % allChars.length;
        password += allChars[charIndex];
      }
      
      // Shuffle password using Fisher-Yates algorithm based on hash
      password = shuffleString(password, bytes);
      
      // Extra security: Add position-based transformations
      let finalPassword = "";
      for(let i = 0; i < password.length; i++) {
        const byte = bytes[i % bytes.length];
        const char = password[i];
        if(byte % 3 === 0 && /[a-z]/.test(char)) {
          finalPassword += char.toUpperCase();
        } else if(byte % 5 === 0 && /[A-Z]/.test(char)) {
          finalPassword += char.toLowerCase();
        } else {
          finalPassword += char;
        }
      }
      
      return finalPassword;
    }

    // SHA-256 Helper
    async function sha256(str) {
      const encoder = new TextEncoder();
      const data = encoder.encode(str);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    // Shuffle String Helper
    function shuffleString(str, bytes) {
      let arr = str.split('');
      for(let i = arr.length - 1; i > 0; i--) {
        const j = bytes[i % bytes.length] % (i + 1);
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.join('');
    }

    // ==================== GENERATE PASSWORD BUTTON ====================
    document.getElementById('generate-btn').onclick = async function() {
      const serviceName = document.getElementById('service-name').value.trim();
      const username = document.getElementById('username').value.trim();
      const account = document.getElementById('account').value.trim();
      const secretKey = document.getElementById('secret-key').value;
      
      // Validation
      if(!serviceName) {
        alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬!');
        return;
      }
      
      if(!username) {
        alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ!');
        return;
      }
      
      if(secretKey.length < 8) {
        alert('âŒ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!');
        return;
      }
      
      // Show loading
      this.innerHTML = '<span class="animate-spin text-2xl">â³</span><span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...</span>';
      this.disabled = true;
      
      setTimeout(async () => {
        try {
          // Generate password
          const password = await generateSecurePassword(
            serviceName,
            username,
            account,
            secretKey,
            16
          );
          
          currentPassword = password;
          
          // Show result
          showPasswordResult(password);
          
          // Reset button
          this.innerHTML = '<span class="text-2xl">ğŸš€</span><span class="text-lg">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø¢Ù†</span>';
          this.disabled = false;
        } catch(error) {
          alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯!');
          this.innerHTML = '<span class="text-2xl">ğŸš€</span><span class="text-lg">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø¢Ù†</span>';
          this.disabled = false;
        }
      }, 1000);
    };

    // ==================== SHOW PASSWORD RESULT ====================
    function showPasswordResult(password) {
      // Display password (hidden initially)
      document.getElementById('result-password').textContent = "â€¢".repeat(password.length);
      document.getElementById('result-password').setAttribute('data-password', password);
      
      // Calculate statistics
      const uppercase = (password.match(/[A-Z]/g) || []).length;
      const lowercase = (password.match(/[a-z]/g) || []).length;
      const numbers = (password.match(/[0-9]/g) || []).length;
      const symbols = (password.match(/[^A-Za-z0-9]/g) || []).length;
      
      document.getElementById('pwd-length').textContent = password.length;
      document.getElementById('pwd-numbers').textContent = numbers;
      document.getElementById('pwd-letters').textContent = uppercase + lowercase;
      document.getElementById('pwd-symbols').textContent = symbols;
      
      // Show strength
      showStrength(password);
      
      // Show modal
      resultModal.classList.remove('hidden');
    }

    // ==================== CLOSE RESULT MODAL ====================
    document.getElementById('close-result').onclick = () => {
      resultModal.classList.add('hidden');
    };

    resultModal.onclick = (e) => {
      if(e.target === resultModal) resultModal.classList.add('hidden');
    };

    // ==================== TOGGLE RESULT VISIBILITY ====================
    let resultVisible = false;
    document.getElementById('toggle-result').onclick = function() {
      const span = document.getElementById('result-password');
      const pw = span.getAttribute('data-password');
      resultVisible = !resultVisible;
      span.textContent = resultVisible ? pw : "â€¢".repeat(pw.length);
      this.innerHTML = resultVisible ? '<span class="text-2xl">ğŸ‘ï¸â€ğŸ—¨ï¸</span>' : '<span class="text-2xl">ğŸ‘ï¸</span>';
    };

    // ==================== COPY RESULT ====================
    document.getElementById('copy-result').onclick = function() {
      const pw = document.getElementById('result-password').getAttribute('data-password');
      navigator.clipboard.writeText(pw);
      const msg = document.getElementById('copy-msg');
      msg.classList.remove('hidden');
      this.innerHTML = '<span class="text-2xl text-green-400">âœ”</span>';
      setTimeout(() => {
        msg.classList.add('hidden');
        this.innerHTML = '<span class="text-2xl">ğŸ“‹</span>';
      }, 2500);
    };

    // ==================== STRENGTH INDICATOR ====================
    function showStrength(password) {
      let score = 0;
      
      // Length scoring
      if(password.length >= 10) score += 20;
      if(password.length >= 12) score += 15;
      if(password.length >= 14) score += 15;
      
      // Character variety
      if(/[A-Z]/.test(password)) score += 15;
      if(/[a-z]/.test(password)) score += 15;
      if(/[0-9]/.test(password)) score += 10;
      if(/[^A-Za-z0-9]/.test(password)) score += 10;
      
      // Multiple of each type
      if((password.match(/[A-Z]/g) || []).length >= 2) score += 5;
      if((password.match(/[a-z]/g) || []).length >= 2) score += 5;
      if((password.match(/[0-9]/g) || []).length >= 2) score += 5;
      if((password.match(/[^A-Za-z0-9]/g) || []).length >= 2) score += 5;
      
      // Cap at 100
      score = Math.min(100, score);
      
      let color = score < 60 ? '#ef4444' : score < 85 ? '#f97316' : '#22c55e';
      let bgColor = score < 60 ? '#7f1d1d' : score < 85 ? '#7c2d12' : '#14532d';
      let strengthText = score < 60 ? 'âš ï¸ Ù…ØªÙˆØ³Ø·' : score < 85 ? 'âš¡ Ù‚ÙˆÙŠ' : 'ğŸ›¡ï¸ Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹';
      
      document.getElementById('strength-indicator').innerHTML = `
        <div class="glass-dark rounded-xl p-4">
          <div class="flex justify-between items-center mb-2">
            <span class="text-sm text-gray-400">Ù‚ÙˆØ© Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯:</span>
            <span class="text-sm font-bold" style="color:${color}">${strengthText}</span>
          </div>
          <div class="w-full h-4 rounded-full overflow-hidden" style="background:${bgColor}">
            <div style="width:${score}%;background:${color};" class="h-4 transition-500 animate-shimmer"></div>
          </div>
          <div class="text-right mt-2">
            <span class="text-xs font-mono" style="color:${color}">${score}%</span>
          </div>
        </div>
      `;
    }

    // ==================== SETTINGS PANEL ====================
    document.getElementById('settings-btn').onclick = () => {
      settingsPanel.classList.remove('hidden');
      settingsOverlay.classList.remove('hidden');
    };

    document.getElementById('close-settings').onclick = () => {
      settingsPanel.classList.add('hidden');
      settingsOverlay.classList.add('hidden');
    };

    settingsOverlay.onclick = () => {
      settingsPanel.classList.add('hidden');
      settingsOverlay.classList.add('hidden');
    };

    // ==================== THEME TOGGLE ====================
    function toggleTheme() {
      darkTheme = !darkTheme;
      const body = document.getElementById('body');
      
      if(darkTheme) {
        body.className = "min-h-screen bg-gradient-to-br from-slate-950 via-gray-900 to-blue-950 text-white transition-500 overflow-x-hidden";
        document.getElementById('theme-icon').textContent = 'ğŸŒ™';
        document.getElementById('theme-text').textContent = 'Ø¯Ø§ÙƒÙ†';
      } else {
        body.className = "min-h-screen bg-gradient-to-br from-slate-400 via-gray-800 to-gray-600 text-gray-900 transition-500 overflow-x-hidden";
        document.getElementById('theme-icon').textContent = 'â˜€ï¸';
        document.getElementById('theme-text').textContent = 'ÙØ§ØªØ­';
      }
    }

    document.getElementById('theme-toggle').onclick = toggleTheme;
    document.getElementById('theme-btn').onclick = toggleTheme;

    // ==================== KEYBOARD SHORTCUTS ====================
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + K: Focus service name
      if((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.getElementById('service-name').focus();
      }
      
      // Escape: Close modals and panels
      if(e.key === 'Escape') {
        resultModal.classList.add('hidden');
        settingsPanel.classList.add('hidden');
        settingsOverlay.classList.add('hidden');
      }
      
      // Enter: Generate password
      if(e.key === 'Enter') {
        const activeEl = document.activeElement;
        if(activeEl.id === 'service-name' || activeEl.id === 'username' || 
           activeEl.id === 'account' || activeEl.id === 'secret-key') {
          document.getElementById('generate-btn').click();
        }
      }
    });

    // ==================== SECURITY: CLEAR ON PAGE UNLOAD ====================
    window.onbeforeunload = () => {
      currentPassword = "";
      document.getElementById('service-name').value = '';
      document.getElementById('username').value = '';
      document.getElementById('account').value = '';
      document.getElementById('secret-key').value = '';
    };
  </script>
</body>
</html>